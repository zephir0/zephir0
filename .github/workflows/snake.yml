# â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
# â•‘  â–‘â–’â–“ SNAKE.EXE â€” CONTRIBUTION DEVOURER â–“â–’â–‘             â•‘
# â•‘  Matrix Profile Automation :: Platane/snk              â•‘
# â•‘  "In the Matrix, even contributions get eaten" ğŸ      â•‘
# â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

name: "ğŸ [MATRIX] snake.exe --devour"

on:
  # â”œâ”€ cron: reboot every 12h to keep the snake fed
  schedule:
    - cron: "0 */12 * * *"
  # â””â”€ manual override: wake the snake on demand
  workflow_dispatch:

jobs:
  devour-contributions:
    name: "ğŸ Deploying snake.exe"
    runs-on: ubuntu-latest
    timeout-minutes: 10
    permissions:
      contents: write

    steps:
      # â”€â”€â”€ PHASE 1: Generate snake SVGs â”€â”€â”€
      - name: "â–‘â–’â–“ Generating snake animation â–“â–’â–‘"
        uses: Platane/snk@v3
        with:
          github_user_name: zephir0
          outputs: |
            dist/github-snake.svg
            dist/github-snake-dark.svg?palette=github-dark

      # â”€â”€â”€ PHASE 2: Deploy to output branch â”€â”€â”€
      - name: "â–‘â–’â–“ Deploying to [output] branch â–“â–’â–‘"
        uses: crazy-max/ghaction-github-pages@v3.1.0
        with:
          target_branch: output
          build_dir: dist
        env:
          GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}
