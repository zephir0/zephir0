# â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
# â•‘  â–‘â–’â–“ DASHBOARD.EXE â€” PROFILE SUMMARY CARDS â–“â–’â–‘         â•‘
# â•‘  Matrix Profile Automation :: lowlighter/metrics       â•‘
# â•‘  "Free your mind... and your profile stats" ğŸ“ˆ         â•‘
# â•‘                                                        â•‘
# â•‘  REQUIRES: METRICS_TOKEN secret (PAT with read:user)   â•‘
# â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

name: "ğŸ“ˆ [MATRIX] dashboard.exe --summarize"

on:
  # â”œâ”€ cron: regenerate dashboard every 12h (offset 30min from metrics)
  schedule:
    - cron: "30 */12 * * *"
  # â””â”€ manual override: force regeneration
  workflow_dispatch:

jobs:
  generate-dashboard:
    name: "ğŸ“ˆ Generating dashboard cards"
    runs-on: ubuntu-latest
    timeout-minutes: 15
    permissions:
      contents: write

    steps:
      # â”€â”€â”€ CARD 1: Profile Details (wide) â”€â”€â”€
      - name: "â–‘â–’â–“ [0x01] Profile overview card â–“â–’â–‘"
        uses: lowlighter/metrics@latest
        with:
          token: ${{ secrets.METRICS_TOKEN }}
          user: zephir0
          filename: metrics/profile-details.svg
          base: header
          base_indepth: yes
          config_display: large
          config_timezone: Europe/Warsaw
          plugin_introduction: yes
          plugin_introduction_title: no
          extras_css: |
            * { color: #00FF41 !important; }
            svg { background-color: #0d1117; }

      # â”€â”€â”€ CARD 2: Repos per Language â”€â”€â”€
      - name: "â–‘â–’â–“ [0x02] Repos per language card â–“â–’â–‘"
        uses: lowlighter/metrics@latest
        with:
          token: ${{ secrets.METRICS_TOKEN }}
          user: zephir0
          filename: metrics/repos-per-language.svg
          base: ""
          plugin_languages: yes
          plugin_languages_details: percentage
          plugin_languages_sections: most-used
          plugin_languages_limit: 6
          plugin_languages_colors: "0:#00FF41, 1:#00CC33, 2:#009926, 3:#006619, 4:#003B00, 5:#141414"
          config_timezone: Europe/Warsaw
          extras_css: |
            * { color: #00FF41 !important; }
            svg { background-color: #0d1117; }

      # â”€â”€â”€ CARD 3: Most Commit Language â”€â”€â”€
      - name: "â–‘â–’â–“ [0x03] Commit language analysis â–“â–’â–‘"
        uses: lowlighter/metrics@latest
        with:
          token: ${{ secrets.METRICS_TOKEN }}
          user: zephir0
          filename: metrics/commit-language.svg
          base: ""
          plugin_languages: yes
          plugin_languages_details: lines, bytes-size
          plugin_languages_sections: recently-used
          plugin_languages_recent_days: 90
          plugin_languages_limit: 6
          plugin_languages_colors: "0:#00FF41, 1:#00CC33, 2:#009926, 3:#006619, 4:#003B00, 5:#141414"
          config_timezone: Europe/Warsaw
          extras_css: |
            * { color: #00FF41 !important; }
            svg { background-color: #0d1117; }

      # â”€â”€â”€ CARD 4: Productive Time â”€â”€â”€
      - name: "â–‘â–’â–“ [0x04] Productive hours heatmap â–“â–’â–‘"
        uses: lowlighter/metrics@latest
        with:
          token: ${{ secrets.METRICS_TOKEN }}
          user: zephir0
          filename: metrics/productive-time.svg
          base: ""
          plugin_habits: yes
          plugin_habits_from: 200
          plugin_habits_days: 30
          plugin_habits_charts: yes
          plugin_habits_charts_type: classic
          config_timezone: Europe/Warsaw
          extras_css: |
            * { color: #00FF41 !important; }
            svg { background-color: #0d1117; }
